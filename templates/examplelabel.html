{% load static %}

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Example Labeler</title>
  <!-- use bootstrap UI -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <!-- base layout -->
  <link rel="stylesheet" href="{% static 'css/examplelabel.css' %}" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="{% static 'js/jquery-3.7.1.js'%}"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
</head>

<body class="container h-screen overflow-y-hidden">

  <!-- 
      The <noscript> tag encloses the content that will be displayed 
      only if JavaScript is disabled or not supported in the user's browser. 
    -->
  <noscript>
    If you see this text, your browser does not support dynamic content
    (JavaScript) or it has been disabled. This study website requires JavaScript.
  </noscript>


  <div class="flex flex-col m-5 justify-start gap-y-4 py-4 h-screen">
    <div class="mx-auto pb-1 h-fit">
      <h1 class="text-3xl font-semibold text-gray-800">Welcome to the Example Labeler</h1>
    </div>

    <!-- display a list of comments to be reviewed -->
    <div x-data="{filters: {yes: true, no: true, notLabeled: true}, counters: {yes: 0, no: 0}}" class="flex flex-col h-5/6">
      <!-- display a set of filter options -->
      <div class="header flex flex-row">
          <div class="flex justify-between">
            <div class="flex space-x-4 mb-4">
              <label class="flex items-center">
                  <input type="checkbox" x-model="filters.yes" id="yesFilter" class="form-checkbox">
                  <span class="ml-2 text-blue-600">Labeled Yes</span>
              </label>
              <label class="flex items-center">
                  <input type="checkbox" x-model="filters.no" id="noFilter" class="form-checkbox">
                  <span class="ml-2 text-red-400">Labeled No</span>
              </label>
              <label class="flex items-center">
                  <input type="checkbox" x-model="filters.notLabeled" id="notLabeledFilter" class="form-checkbox">
                  <span class="ml-2 text-gray-400">Not Labeled</span>
              </label>
            </div>
          </div>
      </div>
      <!-- display a list of comments to be reviewed -->
      <div id="textList" class="body flex flex-col space-y-2 overflow-y-auto py-4 px-4 border border-gray-600 h-full">
        {% for data in dataset %}
        <div 
          x-data="{selected: null, text: '{{ data.text }}'}"
          x-show="(filters.yes && selected == 'yes') || (filters.no && selected == 'no') || (filters.notLabeled && selected == null)"
          class="flex flex-row items-center space-x-4 py-1 border-b border-gray-300">

          <div x-text="text" class="flex-grow w-7/10 p-2"></div>
          <div class="flex flex-row w-3/10 justify-center space-x-2">
            <button 
              @click="selected = 'yes'"
              :class="{'bg-blue-500 hover:bg-blue-600': selected == 'yes', 'bg-gray-300 hover:bg-gray-400': selected !== 'yes'}"
              class="text-white font-bold py-1 px-3 rounded">
              Yes
            </button>
            <button 
              @click="selected = 'no'" 
              :class="{'bg-red-300 hover:bg-red-400': selected === 'no', 'bg-gray-300 hover:bg-gray-400': selected !== 'no'}" 
              class="text-white font-bold py-1 px-3 rounded">
              No
            </button>
          </div>
        </div>
        {% endfor %}
      </div>
      <div>
        <button @click="trainML" class="text-white font-bold py-1 px-3 rounded">
          Train
        </button>
      </div>
    </div>
  </div>
</body> <!-- closes container -->
<!-- custom js -->
<script src="{% static 'js/examplelabel.js' %}"></script>

</html>